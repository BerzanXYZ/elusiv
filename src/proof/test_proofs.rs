use std::str::FromStr;
use ark_ff::{BigInteger256, PrimeField};
use crate::types::Proof;

use super::proof_from_str_projective;

pub struct TestProof {
    pub proof: Proof,
    pub public_inputs: Vec<BigInteger256>,
}

impl TestProof {
    pub fn new(proof: Proof, public_inputs: &[&str]) -> Self {
        TestProof {
            proof,
            public_inputs: public_inputs.iter()
                .map(|x| ark_bn254::Fr::from_str(x).unwrap().into_repr())
                .collect(),
        }
    }
}

/// Note: uses the `TestVKey`
pub fn valid_proofs() -> Vec<TestProof> {
    vec![
        TestProof::new(
            proof_from_str_projective(
                (
                    "6095040847389210072405028578313448726004404186927523408018607784937429286935",
                    "19605789531332173841865535280058494518776157539155791174971437350600842714847",
                    "1",
                ),
                (
                    (
                        "21208249252605301493381024450663869675553862034213308734838823875686250336814",
                        "11055832775662885224002690297911454277344865860650563345886984118417230716893",
                    ),
                    (
                        "552157553008884411464782853288534939106574424520432559998661909488896690077",
                        "11564846023526274865884274843589101795248572914912553904045451647126918118592",
                    ),
                    (
                        "1",
                        "0",
                    ),
                ),
                (
                    "18451822488499248666028053313074324607806552721789970957822401037440259337848",
                    "7766986192767193599804962935368943930791985499103077047360679318719155943932",
                    "1",
                ),
            ),
            &[
                "7889586699914970744657798935358222218486353295005298675075639741334684257960",
                "9606705614694883961284553030253534686862979817135488577431113592919470999200",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "17718047633435172913528840327177336488970255844461341542131787100983543190394",
                "17718047633435172913528840327177336488970255844461341542131787100983543190394",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "340282366920938463463374607431768211455",
                "340282366920938463463374607431768211455",
                "120000",
                "1657140479",
                "1",
                "2",
                "2827970856290632118729271546490749634442294169342908710567180510922374163316",
                "0",
            ]
        ),
        TestProof::new(
            proof_from_str_projective(
                (
                    "4972241989089378106333220369717250266059574254685991284677698769186510248797",
                    "3125741895767289015080962514033786287689075536094511676949131563707287223864",
                    "1",
                ),
                (
                    (
                        "13816678230724510317614047851856225023653367040715227881085854635164767147693",
                        "4723471193419855396439003956095404641566878330463292439372961376454874945398",
                    ),
                    (
                        "4706251513261980187244299857049742828459082035772915123405948747079544442920",
                        "14544272550884997268896810573059798785978669699550846752089508465020606715837",
                    ),
                    (
                        "1",
                        "0",
                    ),
                ),
                (
                    "14561090770974864176709261753874666171051431925850678247640124637407293843512",
                    "6328432704710362259417973239161111471742806237478918579518826846192168142844",
                    "1",
                ),
            ),
            &[
                "7889586699914970744657798935358222218486353295005298675075639741334684257960",
                "9606705614694883961284553030253534686862979817135488577431113592919470999200",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7454920206240002496962627834222966694889986794013375072437794786470525162158",
                "7454920206240002496962627834222966694889986794013375072437794786470525162158",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "340282366920938463463374607431768211455",
                "340282366920938463463374607431768211455",
                "120000",
                "1657144419",
                "1",
                "2",
                "725089478788885875331897966864469950604199807348922025092202060922691233979",
                "0",
            ]
        ),
    ]
}

pub fn invalid_proofs() -> Vec<TestProof> {
    vec![
        // Changed timestamp
        TestProof::new(
            proof_from_str_projective(
                (
                    "6095040847389210072405028578313448726004404186927523408018607784937429286935",
                    "19605789531332173841865535280058494518776157539155791174971437350600842714847",
                    "1",
                ),
                (
                    (
                        "21208249252605301493381024450663869675553862034213308734838823875686250336814",
                        "11055832775662885224002690297911454277344865860650563345886984118417230716893",
                    ),
                    (
                        "552157553008884411464782853288534939106574424520432559998661909488896690077",
                        "11564846023526274865884274843589101795248572914912553904045451647126918118592",
                    ),
                    (
                        "1",
                        "0",
                    ),
                ),
                (
                    "18451822488499248666028053313074324607806552721789970957822401037440259337848",
                    "7766986192767193599804962935368943930791985499103077047360679318719155943932",
                    "1",
                ),
            ),
            &[
                "7889586699914970744657798935358222218486353295005298675075639741334684257960",
                "9606705614694883961284553030253534686862979817135488577431113592919470999200",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "17718047633435172913528840327177336488970255844461341542131787100983543190394",
                "17718047633435172913528840327177336488970255844461341542131787100983543190394",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "340282366920938463463374607431768211455",
                "340282366920938463463374607431768211455",
                "120000",
                "1657140478",
                "1",
                "2",
                "2827970856290632118729271546490749634442294169342908710567180510922374163316",
                "0",
            ]
        ),

        // Changed proof a.x bit
        TestProof::new(
            proof_from_str_projective(
                (
                    "4972241989089378106333220369717250266059574254685991284677698769186510248796",
                    "3125741895767289015080962514033786287689075536094511676949131563707287223864",
                    "1",
                ),
                (
                    (
                        "13816678230724510317614047851856225023653367040715227881085854635164767147693",
                        "4723471193419855396439003956095404641566878330463292439372961376454874945398",
                    ),
                    (
                        "4706251513261980187244299857049742828459082035772915123405948747079544442920",
                        "14544272550884997268896810573059798785978669699550846752089508465020606715837",
                    ),
                    (
                        "1",
                        "0",
                    ),
                ),
                (
                    "14561090770974864176709261753874666171051431925850678247640124637407293843512",
                    "6328432704710362259417973239161111471742806237478918579518826846192168142844",
                    "1",
                ),
            ),
            &[
                "7889586699914970744657798935358222218486353295005298675075639741334684257960",
                "9606705614694883961284553030253534686862979817135488577431113592919470999200",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7548080684044753634901903467536594261850721059805517798311616241293112471457",
                "7454920206240002496962627834222966694889986794013375072437794786470525162158",
                "7454920206240002496962627834222966694889986794013375072437794786470525162158",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "0",
                "340282366920938463463374607431768211455",
                "340282366920938463463374607431768211455",
                "120000",
                "1657144419",
                "1",
                "2",
                "725089478788885875331897966864469950604199807348922025092202060922691233979",
                "0",
            ]
        ),
    ]
}